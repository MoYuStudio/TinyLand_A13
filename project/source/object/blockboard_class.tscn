[gd_scene load_steps=8 format=3 uid="uid://ecsvs2n41png"]

[ext_resource type="Texture2D" uid="uid://oc3bbne2dnby" path="res://resource/graphics/icon/money_x16.png" id="1_1dxsd"]
[ext_resource type="FontFile" uid="uid://ckmyjvou4nb1f" path="res://resource/graphics/font/kenney_pixel.ttf" id="2_m8wvv"]
[ext_resource type="Texture2D" uid="uid://byj4c8gg4la2w" path="res://resource/graphics/tile/side/building_cabin.png" id="3_sd1ix"]

[sub_resource type="GDScript" id="GDScript_h4ixk"]
script/source = "
extends Control

const button_original = preload('res://source/object/blockboard_button.tscn')

var button_icon = 'res://resource/graphics/tile/side/building_cabin.png'
var button_data = {}

func _ready():
	$Button.icon = load(str(button_icon))
	for button in button_data:
		var button_instance = button_original.instantiate()
		button_instance.name = button_data[button]['name']
		button_instance.id = button_data[button]['id']
		button_instance.money = button_data[button]['money']
		button_instance.soil = button_data[button]['soil']
		button_instance.wood = button_data[button]['wood']
		button_instance.stone = button_data[button]['stone']
		button_instance.brick = button_data[button]['iron']
		button_instance.steel = button_data[button]['gold']
		$Group/Group/HBoxContainer.add_child(button_instance)
	
	$Group.button_data = button_data
	pass

func _process(delta):
	$Group.visible = $Button.group_visible
"

[sub_resource type="GDScript" id="GDScript_cxtec"]
script/source = "
extends Control

var button_data = {}

func _ready():
	pass
		

func _process(delta):
	for button in button_data:
		if get_node('Group/HBoxContainer/'+button_data[button]['name']+'/Button').info_popup == true:
			$Price/HBoxContainer/Money/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).money)
			$Price/HBoxContainer/Soil/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).soil)
			$Price/HBoxContainer/Wood/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).wood)
			$Price/HBoxContainer/Stone/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).stone)
			$Price/HBoxContainer/Iron/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).iron)
			$Price/HBoxContainer/Gold/Price.text = str(get_node('Group/HBoxContainer/'+button_data[button]['name']).gold)
			break
			
		else:
			$Price/HBoxContainer/Money/Price.text = str(0)
			$Price/HBoxContainer/Soil/Price.text = str(0)
			$Price/HBoxContainer/Wood/Price.text = str(0)
			$Price/HBoxContainer/Stone/Price.text = str(0)
			$Price/HBoxContainer/Iron/Price.text = str(0)
			$Price/HBoxContainer/Gold/Price.text = str(0)
"

[sub_resource type="GDScript" id="GDScript_ibqcy"]
script/source = "
extends ScrollContainer

func _ready():
	get_h_scroll_bar().modulate = Color(0, 0, 0, 0)
	get_h_scroll_bar().scale.y = 0
"

[sub_resource type="GDScript" id="GDScript_xk5ls"]
script/source = "
extends Button

@export var hovered_zoom_level = 1.25

var blockboard_click_lock = false

# exp var
var group_visible = false

func _physics_process(delta):
	if is_hovered():
		scale = Vector2(hovered_zoom_level,hovered_zoom_level)
		position = Vector2(-64*hovered_zoom_level,-64*(hovered_zoom_level-1))
		blockboard_click_lock = true
	else:
		scale = Vector2(1,1)
		position = Vector2(-64,0)
		blockboard_click_lock = false

func _pressed():
	if group_visible == true:
		group_visible = false
	elif group_visible == false:
		group_visible = true
"

[node name="BlockboardClass" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_h4ixk")

[node name="Group" type="Control" parent="."]
anchors_preset = 0
offset_left = -960.0
offset_top = -128.0
offset_right = -920.0
offset_bottom = -88.0
script = SubResource("GDScript_cxtec")

[node name="PriceBackground" type="ColorRect" parent="Group"]
layout_mode = 0
offset_top = -52.0
offset_right = 1920.0
offset_bottom = -4.0
color = Color(0, 0, 0, 0.282353)

[node name="GroupBackground" type="ColorRect" parent="Group"]
offset_right = 1920.0
offset_bottom = 128.0
color = Color(0, 0, 0, 0.282353)

[node name="Price" type="ScrollContainer" parent="Group"]
layout_mode = 0
offset_left = 170.0
offset_top = -48.0
offset_right = 1270.0
offset_bottom = -20.0
scale = Vector2(1.5, 1.5)

[node name="HBoxContainer" type="HBoxContainer" parent="Group/Price"]
layout_mode = 2
theme_override_constants/separation = 180

[node name="Money" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Money"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Money"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Soil" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Soil"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Soil"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Wood" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Wood"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Wood"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Stone" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Stone"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Stone"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Iron" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Iron"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Iron"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Gold" type="Control" parent="Group/Price/HBoxContainer"]
layout_mode = 2

[node name="Icon" type="Sprite2D" parent="Group/Price/HBoxContainer/Gold"]
texture_filter = 1
position = Vector2(12, 13.5)
scale = Vector2(1.2, 1.2)
texture = ExtResource("1_1dxsd")

[node name="Price" type="Label" parent="Group/Price/HBoxContainer/Gold"]
texture_filter = 1
layout_mode = 0
offset_left = 32.0
offset_top = 1.0
offset_right = 44.0
offset_bottom = 28.0
theme_override_fonts/font = ExtResource("2_m8wvv")
theme_override_font_sizes/font_size = 32
text = "0
"

[node name="Group" type="ScrollContainer" parent="Group"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
script = SubResource("GDScript_ibqcy")

[node name="HBoxContainer" type="HBoxContainer" parent="Group/Group"]
layout_mode = 2

[node name="Button" type="Button" parent="."]
layout_mode = 0
offset_left = -64.0
offset_right = 64.0
offset_bottom = 128.0
icon = ExtResource("3_sd1ix")
flat = true
icon_alignment = 1
expand_icon = true
script = SubResource("GDScript_xk5ls")
